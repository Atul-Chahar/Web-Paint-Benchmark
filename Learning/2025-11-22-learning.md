# Daily Learning Log: Web Paint Benchmark
**Date:** 2025-11-22
**Author:** Atul Chahar / Anant Sharma
**Project Phase:** Week 2 - Logic & Scoring

## 1. Today's Focus: API Integration
Today, I successfully implemented the backend logic for the scoring engine.
* **Milestone:** Verified that the **Google PageSpeed Insights (PSI) API** is working correctly.
* **Outcome:** We are now receiving real-time website statistics, including the global Performance Score and Paint Timing metrics.
* **Strategic Shift:** We confirmed that running a raw Lighthouse audit client-side is not feasible. [cite_start]We have fully committed to using the PSI API as originally planned.

## 2. Technical Deep Dive: Google PageSpeed Insights API
### What is it?
The PageSpeed Insights API allows developers to programmatically run Lighthouse audits on a specific URL. instead of the user's browser rendering the page, Google's servers render it and send back a massive JSON object containing metrics (FCP, LCP, Speed Index) and a final score.

### API Endpoint Structure
To get data, we send a `GET` request to the following endpoint:
`https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url={YOUR_TARGET_URL}&strategy=mobile`

* **url:** The webpage you want to test.
* **strategy:** `mobile` (default) or `desktop`. This changes how the score is calculated based on network throttling.
* **key:** (Optional but recommended) Your Google Cloud API Key.

## 3. Implementation Guide
Here is how I implemented the API call using vanilla JavaScript `fetch`. [cite_start]This logic retrieves the data needed for our "Scoring Engine"[cite: 21].

### The Code Logic
```javascript
const runAudit = async (targetUrl) => {
    // 1. Construct the API URL
    const apiEndpoint = `https://www.googleapis.com/pagespeedonline/v5/runPagespeed`;
    const query = `?url=${encodeURIComponent(targetUrl)}&category=performance&strategy=mobile`;
    const fullUrl = apiEndpoint + query;

    try {
        // 2. Fetch Data (Async/Await)
        const response = await fetch(fullUrl);
        const data = await response.json();

        // 3. Parse the specific data we need for the Dashboard
        const lighthouse = data.lighthouseResult;
        
        // A. The Overall Score (0-1) -> Convert to 0-100
        const performanceScore = lighthouse.categories.performance.score * 100;

        // B. Paint Metrics (First Contentful Paint)
        const fcpMetric = lighthouse.audits['first-contentful-paint'].displayValue;
        const fcpScore = lighthouse.audits['first-contentful-paint'].score;

        // C. Log results for debugging
        console.log(`Overall Score: ${performanceScore}`);
        console.log(`FCP Time: ${fcpMetric}`);
        
        // TODO: Pass 'performanceScore' to the UI Gauge Chart

    } catch (error) {
        console.error("API Error:", error);
        alert("Failed to analyze the URL. Please check the console.");
    }
};