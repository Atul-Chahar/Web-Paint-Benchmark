# Daily Learning Log: Web Paint Benchmark
**Date:** 2025-11-23
**Author:** Atul Chahar / Anant Sharma
**Project Phase:** Week 2/3 - Benchmark Engine & Stress Testing

## 1. Today's Focus: The Benchmark Engine
Today I circled back to the core "Web Paint Benchmark" feature. While the PageSpeed API provides the global score, I need a local engine to "stress test" specific CSS properties.
* **Goal:** Implement a loop that repeatedly applies CSS effects to measure their cost.
* **Metrics:** Paint Costs, Input Latency, and Frame Drops.
* **Tool:** `PerformanceObserver` API (Deep Dive).

## 2. Technical Implementation: Measuring "Stress"
I learned how to use `PerformanceObserver` to listen for specific browser events that indicate the page is struggling.

### A. Measuring Paint Costs & Shifts
To detect if my CSS animations are causing heavy repaints or layout shifts, I configured the observer to listen for `paint` and `layout-shift` entries.

```javascript
const stressObserver = new PerformanceObserver((list) => {
  list.getEntries().forEach((entry) => {
    
    // 1. Check for Layout Shifts (Jank)
    if (entry.entryType === 'layout-shift' && !entry.hadRecentInput) {
      console.warn(`Layout Shift detected: Score ${entry.value}`);
      // Accumulate this for the final report
    }

    // 2. Check for Long Tasks (Main Thread Blocking)
    if (entry.entryType === 'longtask') {
      console.warn(`Long Task detected! Duration: ${entry.duration}ms`);
      // This means the CSS effect froze the UI
    }
  });
});

stressObserver.observe({ entryTypes: ['layout-shift', 'longtask'] });
